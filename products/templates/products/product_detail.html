{% extends "base.html" %}

{% block content %}
    <h1>상세 페이지</h1>
    <h3>{{ product.title }}</h3>
    <p>작성자: </p>
    <p>{{ product.price }}</p>
    
    <div> {{ product.content }}</div>
    <p>{{ product.created_at }}</p>

    <a href="{% url 'products:edit' product.id %}"> 수정 </a>
    <a href="{% url 'products:delete' product.id %}"> 삭제 </a>
    <a href="{% url 'products:index' %}"> 목록으로 </a>

    <h4> 댓글 </h4>
    {% for comment in comments %}
        <p>FK로 댓글 작성한 유저네임 보이기</p>
        <p>{{ comment.content }}</p>
        <p>{{ comment.created_at }}</p>
        <a href="{% url 'products:comment_delete' product.id comment.id%}"> 삭제 </a>
    {% endfor %}
    {% if request.user.is_authenticated %}
    <form action="{% url 'products:comment_create' product.id %}" method="POST">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit"> 댓글 등록 </button>
    </form>
    {% endif %}

{% endblock content %}